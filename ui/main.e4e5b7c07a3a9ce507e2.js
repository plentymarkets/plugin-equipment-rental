(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{"+S+1":function(t,e){t.exports='<terra-alert-panel></terra-alert-panel>\n<terra-base-toolbar>\n    <div class="btn-group" role="group">\n        <terra-button [inputIcon]="\'icon-save\'"\n                      [inputTooltipText]="\'Save\'"\n                      [inputTooltipPlacement]="\'bottom\'"\n                      (outputClicked)="saveSettings()">\n        </terra-button>\n    </div>\n</terra-base-toolbar>\n\n<div *ngIf="isLoading; then loadingBlock else contentBlock"></div>\n<ng-template #loadingBlock>\n    <terra-portlet>\n        <div class="loadingComponent">\n            <terra-loading-spinner></terra-loading-spinner>\n            Loading...\n        </div>\n    </terra-portlet>\n</ng-template>\n\n<ng-template #contentBlock>\n    <terra-portlet\n            inputPortletHeader="Ger\xe4tekategorien">\n        <div class="row">\n            <div class="col-lg-8">\n                <terra-multi-check-box [(ngModel)]="categoryValues"\n                                       [inputIsDisabled]="false">\n                </terra-multi-check-box>\n            </div>\n            <div class="col-lg-4">\n                <h4>Aktive Kategorien</h4>\n                <terra-taglist [inputTagList]="activeCategorys"></terra-taglist>\n            </div>\n        </div>\n    </terra-portlet>\n\n    <terra-portlet\n            inputPortletHeader="E-Mail Template">\n        <div class="row">\n            <div class="col-lg-8">\n                <terra-portlet>\n                    <terra-text-input\n                            inputName="E-Mail Betreff"\n                            [(ngModel)]="emailTemplateTopic">\n                    </terra-text-input>\n                    <terra-note-editor [inputPlaceholder]="\'E-Mail Template zur Erinnerung\'"\n                                       [(ngModel)]="emailTemplate">\n                    </terra-note-editor>\n                </terra-portlet>\n            </div>\n            <div class="col-lg-4">\n                <terra-portlet inputPortletHeader="Variablen">\n                    <table class="table table-striped">\n                        <tr>\n                            <td>$deviceOwnerFullName</td>\n                            <td>Name der Person, welche das Ger\xe4t aktuell ausgeliehen hat</td>\n                        </tr>\n                        <tr>\n                            <td>$deviceOwnerFirstName</td>\n                            <td>Vorname der Person, welche das Ger\xe4t aktuell ausgeliehen hat</td>\n                        </tr>\n                        <tr>\n                            <td>$deviceOwnerLastName</td>\n                            <td>Nachname der Person, welche das Ger\xe4t aktuell ausgeliehen hat</td>\n                        </tr>\n                        <tr>\n                            <td>$deviceName</td>\n                            <td>Name des Ger\xe4tes</td>\n                        </tr>\n                        <tr>\n                            <td>$deviceRentedAt</td>\n                            <td>Zeitpunkt des Verleihs</td>\n                        </tr>\n                    </table>\n                </terra-portlet>\n            </div>\n        </div>\n    </terra-portlet>\n</ng-template>\n\n'},0:function(t,e,a){t.exports=a("zUnb")},JObr:function(t,e){t.exports="terra-breadcrumbs + .outlet-container {\n  height: calc(100% - var(--breadcrumbs-height));\n  overflow: auto; }\n"},RnhZ:function(t,e,a){var n={"./af":"K/tc","./af.js":"K/tc","./ar":"jnO4","./ar-dz":"o1bE","./ar-dz.js":"o1bE","./ar-kw":"Qj4J","./ar-kw.js":"Qj4J","./ar-ly":"HP3h","./ar-ly.js":"HP3h","./ar-ma":"CoRJ","./ar-ma.js":"CoRJ","./ar-sa":"gjCT","./ar-sa.js":"gjCT","./ar-tn":"bYM6","./ar-tn.js":"bYM6","./ar.js":"jnO4","./az":"SFxW","./az.js":"SFxW","./be":"H8ED","./be.js":"H8ED","./bg":"hKrs","./bg.js":"hKrs","./bm":"p/rL","./bm.js":"p/rL","./bn":"kEOa","./bn.js":"kEOa","./bo":"0mo+","./bo.js":"0mo+","./br":"aIdf","./br.js":"aIdf","./bs":"JVSJ","./bs.js":"JVSJ","./ca":"1xZ4","./ca.js":"1xZ4","./cs":"PA2r","./cs.js":"PA2r","./cv":"A+xa","./cv.js":"A+xa","./cy":"l5ep","./cy.js":"l5ep","./da":"DxQv","./da.js":"DxQv","./de":"tGlX","./de-at":"s+uk","./de-at.js":"s+uk","./de-ch":"u3GI","./de-ch.js":"u3GI","./de.js":"tGlX","./dv":"WYrj","./dv.js":"WYrj","./el":"jUeY","./el.js":"jUeY","./en-SG":"zavE","./en-SG.js":"zavE","./en-au":"Dmvi","./en-au.js":"Dmvi","./en-ca":"OIYi","./en-ca.js":"OIYi","./en-gb":"Oaa7","./en-gb.js":"Oaa7","./en-ie":"4dOw","./en-ie.js":"4dOw","./en-il":"czMo","./en-il.js":"czMo","./en-nz":"b1Dy","./en-nz.js":"b1Dy","./eo":"Zduo","./eo.js":"Zduo","./es":"iYuL","./es-do":"CjzT","./es-do.js":"CjzT","./es-us":"Vclq","./es-us.js":"Vclq","./es.js":"iYuL","./et":"7BjC","./et.js":"7BjC","./eu":"D/JM","./eu.js":"D/JM","./fa":"jfSC","./fa.js":"jfSC","./fi":"gekB","./fi.js":"gekB","./fo":"ByF4","./fo.js":"ByF4","./fr":"nyYc","./fr-ca":"2fjn","./fr-ca.js":"2fjn","./fr-ch":"Dkky","./fr-ch.js":"Dkky","./fr.js":"nyYc","./fy":"cRix","./fy.js":"cRix","./ga":"USCx","./ga.js":"USCx","./gd":"9rRi","./gd.js":"9rRi","./gl":"iEDd","./gl.js":"iEDd","./gom-latn":"DKr+","./gom-latn.js":"DKr+","./gu":"4MV3","./gu.js":"4MV3","./he":"x6pH","./he.js":"x6pH","./hi":"3E1r","./hi.js":"3E1r","./hr":"S6ln","./hr.js":"S6ln","./hu":"WxRl","./hu.js":"WxRl","./hy-am":"1rYy","./hy-am.js":"1rYy","./id":"UDhR","./id.js":"UDhR","./is":"BVg3","./is.js":"BVg3","./it":"bpih","./it-ch":"bxKX","./it-ch.js":"bxKX","./it.js":"bpih","./ja":"B55N","./ja.js":"B55N","./jv":"tUCv","./jv.js":"tUCv","./ka":"IBtZ","./ka.js":"IBtZ","./kk":"bXm7","./kk.js":"bXm7","./km":"6B0Y","./km.js":"6B0Y","./kn":"PpIw","./kn.js":"PpIw","./ko":"Ivi+","./ko.js":"Ivi+","./ku":"JCF/","./ku.js":"JCF/","./ky":"lgnt","./ky.js":"lgnt","./lb":"RAwQ","./lb.js":"RAwQ","./lo":"sp3z","./lo.js":"sp3z","./lt":"JvlW","./lt.js":"JvlW","./lv":"uXwI","./lv.js":"uXwI","./me":"KTz0","./me.js":"KTz0","./mi":"aIsn","./mi.js":"aIsn","./mk":"aQkU","./mk.js":"aQkU","./ml":"AvvY","./ml.js":"AvvY","./mn":"lYtQ","./mn.js":"lYtQ","./mr":"Ob0Z","./mr.js":"Ob0Z","./ms":"6+QB","./ms-my":"ZAMP","./ms-my.js":"ZAMP","./ms.js":"6+QB","./mt":"G0Uy","./mt.js":"G0Uy","./my":"honF","./my.js":"honF","./nb":"bOMt","./nb.js":"bOMt","./ne":"OjkT","./ne.js":"OjkT","./nl":"+s0g","./nl-be":"2ykv","./nl-be.js":"2ykv","./nl.js":"+s0g","./nn":"uEye","./nn.js":"uEye","./pa-in":"8/+R","./pa-in.js":"8/+R","./pl":"jVdC","./pl.js":"jVdC","./pt":"8mBD","./pt-br":"0tRk","./pt-br.js":"0tRk","./pt.js":"8mBD","./ro":"lyxo","./ro.js":"lyxo","./ru":"lXzo","./ru.js":"lXzo","./sd":"Z4QM","./sd.js":"Z4QM","./se":"//9w","./se.js":"//9w","./si":"7aV9","./si.js":"7aV9","./sk":"e+ae","./sk.js":"e+ae","./sl":"gVVK","./sl.js":"gVVK","./sq":"yPMs","./sq.js":"yPMs","./sr":"zx6S","./sr-cyrl":"E+lV","./sr-cyrl.js":"E+lV","./sr.js":"zx6S","./ss":"Ur1D","./ss.js":"Ur1D","./sv":"X709","./sv.js":"X709","./sw":"dNwA","./sw.js":"dNwA","./ta":"PeUW","./ta.js":"PeUW","./te":"XLvN","./te.js":"XLvN","./tet":"V2x9","./tet.js":"V2x9","./tg":"Oxv6","./tg.js":"Oxv6","./th":"EOgW","./th.js":"EOgW","./tl-ph":"Dzi0","./tl-ph.js":"Dzi0","./tlh":"z3Vd","./tlh.js":"z3Vd","./tr":"DoHr","./tr.js":"DoHr","./tzl":"z1FC","./tzl.js":"z1FC","./tzm":"wQk9","./tzm-latn":"tT3J","./tzm-latn.js":"tT3J","./tzm.js":"wQk9","./ug-cn":"YRex","./ug-cn.js":"YRex","./uk":"raLr","./uk.js":"raLr","./ur":"UpQW","./ur.js":"UpQW","./uz":"Loxo","./uz-latn":"AQ68","./uz-latn.js":"AQ68","./uz.js":"Loxo","./vi":"KSF8","./vi.js":"KSF8","./x-pseudo":"/X5v","./x-pseudo.js":"/X5v","./yo":"fzPg","./yo.js":"fzPg","./zh-cn":"XDpg","./zh-cn.js":"XDpg","./zh-hk":"SatO","./zh-hk.js":"SatO","./zh-tw":"kOpN","./zh-tw.js":"kOpN"};function r(t){var e=i(t);return a(e)}function i(t){var e=n[t];if(!(e+1)){var a=new Error("Cannot find module '"+t+"'");throw a.code="MODULE_NOT_FOUND",a}return e}r.keys=function(){return Object.keys(n)},r.resolve=i,t.exports=r,r.id="RnhZ"},T8DE:function(t,e){t.exports='<terra-alert-panel></terra-alert-panel>\n<terra-3-col [leftColumnWidth]="leftColumnWidth" [centerColumnWidth]="centerColumnWidth" [rightColumnWidth]="rightColumnWidth">\n    <div class="leftColumn" left>\n        <terra-filter (outputOnSearchBtnClicked)="onSearchBtnClicked()"\n            (outputOnResetBtnClicked)="onResetBtnClicked()"\n            (outputOnEnterSubmit)="onSubmit()">\n            <terra-text-input inputName="Name" [(ngModel)]="_name">\n            </terra-text-input>\n            <terra-select-box\n                    inputName="Verf\xfcgbarkeit"\n                    [inputListBoxValues]="_selectAvailable"\n                    [(ngModel)]="availableFilter">\n            </terra-select-box>\n            <terra-select-box\n                    inputName="Kategorie"\n                    [inputListBoxValues]="_selectCategory"\n                    [(ngModel)]="categoryFilter">\n            </terra-select-box>\n            <terra-select-box\n                    inputName="Benutzer"\n                    [inputListBoxValues]="_statsDataService._selectUser"\n                    [(ngModel)]="userFilter">\n            </terra-select-box>\n        </terra-filter>\n    </div>\n\n    <div center>\n        <terra-base-toolbar >\n            <div class="btn-group" role="group">\n                <terra-button inputIcon=\'icon-export\'\n                              [inputTooltipText]="\'CSV Exportieren\'"\n                              [inputTooltipPlacement]="\'bottom\'"\n                              (click)="exportCSV()"\n                >\n                </terra-button><br/>\n            </div>\n        </terra-base-toolbar>\n        <terra-portlet>\n            <div *ngIf="isLoading" class="loadingComponent">\n                <terra-loading-spinner></terra-loading-spinner>\n                Loading...\n            </div>\n            <terra-card *ngIf="!isLoading" [tooltip]="\'Neuen Artikel anlegen\'" placement="bottom" style="float:left;" inputPlaceholderIcon="icon-add" (click)="loadCreateItem()">\n                <div terra-card-header>\n                    <p>Neuen Artikel anlegen</p>\n                </div>\n                <div terra-card-footer>\n                </div>\n            </terra-card>\n            <terra-card *ngFor="let article of _statsDataService.articles" inputImagePath="{{ article.image }}" (click)="onClickTerraCard(article.id)"  [tooltip]="article.available == 0 ? \'Dieses Ger\xe4t ist verliehen an \'+article.user : \'\'" placement="bottom" [className]="article.available == 0 ? \'rent\' : \'available\'">\n                <div terra-card-header>\n                    <p>{{ article.name }}</p>\n                </div>\n                <div terra-card-footer>\n                    <p>&nbsp;</p>\n                </div>\n            </terra-card>\n        </terra-portlet>\n    </div>\n    <div class="rightColumn" right>\n        <div class="container-fluid">\n            <div class="row">\n                <div class="col-lg-12">\n                    <terra-base-toolbar>\n                        <div class="btn-group" role="group">\n                            <terra-button *ngIf="!_statsDataService._actualArticleIsRent && !isLoading" inputIcon=\'icon-save\'\n                                [inputTooltipText]="\'Verleihen\'"\n                                [inputTooltipPlacement]="\'bottom\'"\n                                (click)="rentItem(_statsDataService._actualArticleKey)"\n                            >\n                            </terra-button>\n                            <terra-button *ngIf="_statsDataService._actualArticleIsRent && !isLoading" inputIcon=\'icon-save\'\n                                          [inputTooltipText]="\'Zur\xfcckgeben\'"\n                                          [inputTooltipPlacement]="\'bottom\'"\n                                          (click)="giveBack(_statsDataService._actualArticleId)"\n                            >\n                            </terra-button>\n                </div>\n                </terra-base-toolbar>\n            </div>\n            <div class="col-lg-9">\n                <terra-portlet *ngIf="isLoading" class="loadingComponent">\n                    <terra-loading-spinner></terra-loading-spinner>\n                    Loading...\n                </terra-portlet>\n                    <ng-container *ngIf="!_statsDataService._actualArticleIsRent && !isLoading">\n                        <terra-portlet>\n                            <h1>Artikel verleihen</h1>\n                            <terra-text-input inputName="Benutzer suchen" [(ngModel)]="searchName" (ngModelChange)="autofill($event)"></terra-text-input>\n                            <ng-template [ngIf]="autofillLoading">\n                                Loading...\n                            </ng-template>\n                            <ng-template [ngIf]="findUserResult && findUserResult.length > 0">\n                                <div class="popupWrapper">\n                                    <table class="table popupTable">\n                                        <thead>\n                                            <tr>\n                                                <th>Vorname</th>\n                                                <th>Nachname</th>\n                                                <th>E-Mail</th>\n                                                <th>Typ</th>\n                                            </tr>\n                                        </thead>\n                                        <tbody>\n                                            <tr *ngFor="let user of findUserResult; let index = index" (click)="fillForms(user)">\n                                                <td>{{ user.firstname }}</td>\n                                                <td>{{ user.lastname }}</td>\n                                                <td>{{ user.email }}</td>\n                                                <td>Benutzer</td>\n                                            </tr>\n                                        </tbody>\n                                    </table>\n                                </div>\n                            </ng-template>\n                            <br>\n\n                            <terra-text-input inputName="Vorname*" [(ngModel)]="firstName" (ngModelChange)="emailAutocomplete($event)"></terra-text-input>\n                            <terra-text-input inputName="Nachname*" [(ngModel)]="lastName" (ngModelChange)="emailAutocomplete($event)"> </terra-text-input>\n                            <terra-text-input inputName="E-Mail*" [(ngModel)]="email"></terra-text-input>\n                            <terra-date-picker\n                                    inputName="R\xfcckgabedatum"\n                                    [(ngModel)]="date">\n                            </terra-date-picker>\n                            <terra-text-input inputName="Bemerkung" [(ngModel)]="comment"></terra-text-input>\n                        </terra-portlet>\n                    </ng-container>\n                    <ng-container *ngIf="_statsDataService._actualArticleIsRent && !isLoading">\n                        <terra-portlet>\n                            <h2>Artikel zur\xfcckgeben</h2>\n                            <terra-text-input inputName="Bemerkung" [(ngModel)]="giveBackComment"></terra-text-input>\n                            <terra-select-box\n                                    inputName="Status"\n                                    [inputListBoxValues]="_selectStatus"\n                                    [(ngModel)]="statusOption">\n                            </terra-select-box>\n                        </terra-portlet>\n                        <terra-portlet>\n                            <div *ngIf="_statsDataService._actualArticleData.user">\n                                <h2>Der Artikel ist bereits verliehen</h2>\n                                <table class="table table-striped">\n                                    <tbody>\n                                        <tr>\n                                            <td>Verliehen an:</td>\n                                            <td>{{ _statsDataService._actualArticleData.user.firstname| titlecase }} {{ _statsDataService._actualArticleData.user.lastname| titlecase }}</td>\n                                        </tr>\n                                        <tr>\n                                            <td>Verliehen am:</td>\n                                            <td>{{ _statsDataService._actualArticleData.created_at*1000| date:\'dd.MM.yyyy\' }}</td>\n                                        </tr>\n                                        <tr *ngIf="_statsDataService._actualArticleData.rent_until > 0">\n                                            <td>Artikel verliehen bis:</td>\n                                            <td>{{ _statsDataService._actualArticleData.rent_until*1000| date:\'dd.MM.yyyy\' }}</td>\n                                        </tr>\n                                        <tr *ngIf="_actualArticleTimeDif > 0">\n                                            <td>Tage verbleibend:</td>\n                                            <td>{{ _actualArticleTimeDif }}</td>\n                                        </tr>\n                                        <tr *ngIf="_actualArticleTimeDif < 0">\n                                            <td>Tage \xfcberschritten:</td>\n                                            <td>{{ _actualArticleTimeDif*-1}}</td>\n                                        </tr>\n                                        <tr *ngIf="_statsDataService._actualArticleData.comment.length > 0">\n                                            <td>Vermerkung:</td>\n                                            <td>{{ _statsDataService._actualArticleData.comment }}</td>\n                                        </tr>\n                                    </tbody>\n                                </table>\n\n                            </div>\n                        </terra-portlet>\n                    </ng-container>\n                    <terra-portlet *ngIf="!isLoading && _statsDataService._actualArticleKey > 0 && _statsDataService.history.length > 0 && _statsDataService.history[_statsDataService._actualArticleId] && _historyService.rowList.length > 0">\n                        <h2>Verleih Historie</h2>\n                        <terra-data-table\n                                [inputService]="_historyService"\n                                [inputHasCheckboxes]="false"\n                                [inputHeaderList]="headerList"\n                                [inputContextMenu]="contextMenu"\n                                [useContentBody]="true"\n                                #table\n                        >\n                            <tbody>\n                            <tr [tcTableRow]="row" hasContextMenu [rowData]="row.data" *ngFor="let row of _historyService.rowList; let index = index">\n                                <td>{{ row.data.user }}</td>\n                                <td>{{ row.data.adminUser }}</td>\n                                <td>{{ row.data.comment }}</td>\n                                <td>{{ row.data.getBackComment }}</td>\n                                <td>{{ row.data.created_at }}</td>\n                                <td>{{ row.data.rent_until }}</td>\n                                <td>{{ row.data.status }}</td>\n                            </tr>\n                            </tbody>\n\n                        </terra-data-table>\n                    </terra-portlet>\n                </div>\n                <div class="col-lg-3">\n                    <terra-portlet>\n                        <div>\n                        <div *ngIf="_statsDataService.articlesResult && _statsDataService.articlesResult[_statsDataService._actualArticleKey]">\n                            <h1>{{ _statsDataService.articlesResult[_statsDataService._actualArticleKey].name }}</h1>\n                            <div class="text-center">\n                                <img src="{{ _statsDataService.articlesResult[_statsDataService._actualArticleKey].image }}" class="img" alt="{{ _statsDataService.articlesResult[_statsDataService._actualArticleKey].name }}">\n                            </div>\n                            <p innerHTML="{{ _statsDataService.articlesResult[_statsDataService._actualArticleKey].longDescription }}"></p>\n                            <table class="table table-striped" *ngIf="_statsDataService.articlesResult[_statsDataService._actualArticleKey]">\n                                <tbody>\n                                    <tr *ngFor="let attributeResult of _statsDataService.articlesResult[_statsDataService._actualArticleKey].attributes">\n                                        <td>{{ attributeResult.attribute.backendName }}</td>\n                                        <td>{{ attributeResult.attributeValue.backendName }}</td>\n                                    </tr>\n                                    <ng-template [ngIf]="_statsDataService.articlesResult[_statsDataService._actualArticleKey].properties.length > 0">\n                                        <tr *ngFor="let property of _statsDataService.articlesResult[_statsDataService._actualArticleKey].properties; index as i">\n                                            <ng-template [ngIf]="_statsDataService.propertyNames[property.propertyRelation.position]">\n                                                <td>{{ _statsDataService.propertyNames[property.propertyRelation.position] }}</td>\n                                                <td>{{ property.relationValues[0].value }}</td>\n                                            </ng-template>\n                                        </tr>\n                                    </ng-template>\n                                </tbody>\n                            </table>\n                        </div>\n                    </div>\n                    </terra-portlet>\n                </div>\n            </div>\n        </div>\n    </div>\n</terra-3-col>\n'},VhEL:function(t,e){t.exports='<terra-alert-panel></terra-alert-panel>\n<terra-overlay #manageOverlay\n               inputOverlayTitle="Gruppenfunktion"\n               [inputIsSmall]="true">\n    <ng-template [ngIf]="manageTable.selectedRowList.length > 0" [ngIfElse]="noSelectedRows">\n        <terra-portlet>\n            <terra-button inputCaption="Ausf\xfchren"\n                          inputIcon="icon-execute"\n                          (outputClicked)="executePopupFunction(manageTable.selectedRowList)">\n            </terra-button>\n        </terra-portlet>\n        <terra-portlet>\n            <table class="table table-striped table-group-option">\n                <tr>\n                    <td><terra-checkbox [(ngModel)]="sendMailOption"></terra-checkbox></td>\n                    <td>E-Mail senden</td>\n                </tr>\n                <tr>\n                    <td><terra-checkbox [(ngModel)]="giveBackOption"></terra-checkbox></td>\n                    <td>R\xfcckgabe buchen</td>\n                </tr>\n            </table>\n        </terra-portlet>\n    </ng-template>\n    <ng-template #noSelectedRows>\n        Es wurden keine Eintr\xe4ge ausgew\xe4hlt\n    </ng-template>\n</terra-overlay>\n<terra-data-table\n        [inputService]="_manageService"\n        [inputHasCheckboxes]="true"\n        [inputHeaderList]="headerList"\n        [inputContextMenu]="contextMenu"\n        [useContentBody]="true"\n        #manageTable\n>\n    <terra-group-function [show]="true"\n                          [disableExecution]="false"\n                          (executeGroupFunction)="executeGroupFunction(manageTable.selectedRowList)">\n    </terra-group-function>\n    <tbody>\n    <tr [tcTableRow]="row" hasContextMenu [rowData]="row.data" *ngFor="let row of _manageService.rowList; let index = index">\n        <td>{{ row.data.name }}</td>\n        <td>\n            {{ capitalize(row.data.user.firstname) }} {{ capitalize(row.data.user.lastname) }}\n        </td>\n        <td>{{ row.data.comment }}</td>\n        <td>{{ row.data.created_at }}</td>\n        <td [ngClass]="expiredDateClass(row.data.rent_until)">\n            <ng-template [ngIf]="isNumber(row.data.rent_until)" [ngIfElse]="rentUntilString">\n                <ng-template [ngIf]="row.data.rent_until <= 0" [ngIfElse]="rentUntilTimeLeft">\n                    <ng-template [ngIf]="row.data.rent_until == 0">\n                       Abgabe ist heute\n                    </ng-template>\n                    <ng-template [ngIf]="row.data.rent_until < 0">\n                        {{ row.data.rent_until*-1 }} {{ formatSingularPlural(row.data.rent_until,"Tag","Tage") }} \xfcber dem Datum\n                    </ng-template>\n                </ng-template>\n                <ng-template #rentUntilTimeLeft>\n                    {{ row.data.rent_until }} {{ formatSingularPlural(row.data.rent_until,"Tag","Tage") }}\n                </ng-template>\n            </ng-template>\n            <ng-template #rentUntilString>\n                {{ row.data.rent_until }}\n            </ng-template>\n        </td>\n    </tr>\n    </tbody>\n\n</terra-data-table>\n'},ZnS7:function(t,e){t.exports='.card-header, .card-footer {\n  background-color: whitesmoke !important; }\n\n.container-fluid[_ngcontent-c4] .row[_ngcontent-c4] .overflow-auto[_ngcontent-c4] {\n  overflow: visible !important; }\n\n.rent .card {\n  border: 2px solid red !important; }\n\n.rent .card:hover {\n    border: 2px solid var(--color-active) !important; }\n\n.loadingComponent {\n  text-align: center !important; }\n\n.loadingComponent .double-bounce1, .loadingComponent .double-bounce2 {\n    background-color: var(--color-structure-5) !important; }\n\n.loadingComponent .spinner {\n    margin: 0px auto !important; }\n\n/* Bootstrap 4 Tooltip */\n\n.tooltip {\n  position: absolute;\n  z-index: 1070;\n  display: block;\n  margin: 0;\n  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";\n  font-style: normal;\n  font-weight: 400;\n  line-height: 1.5;\n  text-align: left;\n  text-align: start;\n  text-decoration: none;\n  text-shadow: none;\n  text-transform: none;\n  letter-spacing: normal;\n  word-break: normal;\n  word-spacing: normal;\n  white-space: normal;\n  line-break: auto;\n  font-size: .875rem;\n  word-wrap: break-word;\n  opacity: 0; }\n\n.tooltip.show {\n  opacity: .9; }\n\n.tooltip .arrow {\n  position: absolute;\n  display: block;\n  width: .8rem;\n  height: .4rem; }\n\n.tooltip .arrow::before {\n  position: absolute;\n  content: "";\n  border-color: transparent;\n  border-style: solid; }\n\n.red {\n  color: red !important; }\n\n.yellow {\n  color: orange !important; }\n\n.table-group-option .checkbox-container {\n  max-width: 30px !important; }\n\n.table-group-option td:nth-child(1) {\n  max-width: 0px !important;\n  padding-right: 0 !important;\n  padding-left: 10px !important; }\n\n.taglist[_ngcontent-c7] {\n  display: block !important; }\n\n.popupTable {\n  max-width: 350px !important;\n  background: var(--color-structure-0);\n  position: absolute;\n  z-index: 999;\n  max-height: 200px;\n  overflow-y: auto;\n  margin: 0;\n  padding: 0;\n  box-shadow: var(--box-shadow); }\n\n.popupTable tbody tr:hover {\n    background: var(--color-structure-3) !important; }\n\n.group-function-body {\n  display: none; }\n\n.container-fluid[_ngcontent-c6] .row[_ngcontent-c6] .overflow-auto[_ngcontent-c6] {\n  height: 100%; }\n'},aIeQ:function(t,e){t.exports=""},crnd:function(t,e){function a(t){return Promise.resolve().then(function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}a.keys=function(){return[]},a.resolve=a,t.exports=a,a.id="crnd"},e5xU:function(t,e){t.exports=".text-center {\n  text-align: center; }\n  .text-center .img {\n    max-width: 100% !important;\n    max-height: 400px !important; }\n  .icon-table_sort {\n  display: none; }\n"},jx0p:function(t,e){t.exports='<div class="col-md-6">\n  <terra-portlet inputPortletHeader="Artikel anlegen">\n    <terra-text-input inputName="Artikelname"\n                      [(ngModel)]="name">\n    </terra-text-input>\n    <terra-file-input\n            inputName="Bild">\n    </terra-file-input>\n  </terra-portlet>\n</div>\n'},xBDF:function(t,e){t.exports="<router-outlet></router-outlet>\n"},xlcr:function(t,e){t.exports='<terra-breadcrumbs></terra-breadcrumbs>\n<div class="outlet-container">\n    <router-outlet></router-outlet>\n</div>\n'},zUnb:function(t,e,a){"use strict";a.r(e);var n=a("CcnG"),r=a("ToYH"),i={production:!0},s=a("mrSG"),o=a("ZYjt"),l=a("sE5F"),c=a("up6G"),u=a("gIcY"),d=function(){var t=localStorage.getItem("plentymarkets_lang_"),e=null;null!==t?e=t:("de"!==(e=navigator.language.slice(0,2).toLocaleLowerCase())&&"en"!==e&&(e="en"),localStorage.setItem("plentymarkets_lang_",e));return{locale:{languages:[{code:"en",dir:"ltr"},{code:"de",dir:"ltr"}],language:e,storage:c.StorageStrategy.Cookie},translation:{providers:[{type:c.ProviderType.Static,prefix:"assets/lang/locale-"},{type:c.ProviderType.Static,prefix:"assets/lang/terra-components/locale-"}],caching:!0,composedKeySeparator:".",i18nPlural:!1}}}();var p,g=a("t/Na"),h=a("ZYCi"),m=a("MnON"),v=function(){function t(){}return Object.defineProperty(t.prototype,"breadcrumbsService",{get:function(){return this.breadcrumbs.breadcrumbsService},enumerable:!0,configurable:!0}),s.c([Object(n.ViewChild)(m.TerraBreadcrumbsComponent),s.f("design:type",m.TerraBreadcrumbsComponent)],t.prototype,"breadcrumbs",void 0),t=s.c([Object(n.Component)({selector:"router-view",template:a("xlcr"),styles:[a("JObr")]})],t)}(),f=a("F/XL");function b(t){return null==t}!function(t){t.descending="desc",t.ascending="asc"}(p||(p={}));var y=function(t){function e(){var e=t.call(this)||this;return e.data=[],e.defaultPagingSize=5,e.pagingSizes=[{value:5,caption:"5"},{value:10,caption:"10"},{value:15,caption:"15"},{value:20,caption:"20"}],e}return s.d(e,t),e.prototype.requestTableData=function(t){var e=Math.max((t.page-1)*t.itemsPerPage,0),a=Math.min(t.page*t.itemsPerPage,this.data.length),n=Math.ceil(this.data.length/t.itemsPerPage),r={page:t.page,itemsPerPage:t.itemsPerPage,totalsCount:this.data.length,isLastPage:t.page===n,lastPageNumber:n,firstOnPage:e+1,lastOnPage:a};b(t)&&(t={}),b(t.sortBy)&&(t.sortBy="created_at"),b(t.sortOrder)&&(t.sortOrder=p.descending);var i=this.applySorting(this.data,t.sortBy,t.sortOrder);return r.entries=i.slice(e,a),Object(f.a)(r)},e.prototype.applySorting=function(t,e,a){var n;return n=a===p.ascending?function(t,a){return t[e]-a[e]}:function(t,a){return a[e]-t[e]},t.sort(n)},e.prototype.addEntry=function(t){this.data.push(t)},e.prototype.clearEntrys=function(){this.data=[]},e.prototype.capitalize=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},e.prototype.dataToRowMapping=function(t){var e=[{data:t.user},{data:t.adminUser},{data:t.comment},{data:t.getBackComment},{data:t.rent_until},{data:t.created_at},{data:t.status},{data:t.deviceId}];return b(t.user.firstname)||(t.user=this.capitalize(t.user.firstname)+" "+this.capitalize(t.user.lastname)),{cellList:e,data:t}},e=s.c([Object(n.Injectable)(),s.f("design:paramtypes",[])],e)}(m.TerraDataTableBaseService),_=function(){function t(t){this.http=t,this.token="eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImp0aSI6IjJlM2EwYTlmOWNkZjY3MTZmYWFkZmRiYTliOWY0NTI1ZjMwYzk4YTcwZDYwOGM0NTM1NWVjNDNjMTBlZWQxYmVmMmNlYmRmZjY2YWZjMTQxIn0.eyJhdWQiOiIxIiwianRpIjoiMmUzYTBhOWY5Y2RmNjcxNmZhYWRmZGJhOWI5ZjQ1MjVmMzBjOThhNzBkNjA4YzQ1MzU1ZWM0M2MxMGVlZDFiZWYyY2ViZGZmNjZhZmMxNDEiLCJpYXQiOjE1NjQxMjE1NzksIm5iZiI6MTU2NDEyMTU3OSwiZXhwIjoxNTY0MjA3OTc5LCJzdWIiOiIzIiwic2NvcGVzIjpbIioiXX0.h2Yvyu7E2_xD_eaaB2fnsI3EQEQfzVwDgse4jMYoWk77fPP1k-05yQLIqaKWe-aGjImdNLyddXqxWdEb-AaHsW_tb8UPJICwR6IDHrF6a6hy5nQ08899vhPgJDV_ulcwCRWVD1V_7AOMTSYwGI3fy6ok24gAgDh4jIjz1taRZeidXYXRvuJxiMHN4oOENg7YZqiZS2E1ZCJ_k3eO_XLm-JSxyV2MSP8B9LMyxqpez_r3s9i6-A_hgjYsaIaBXsPqDixTxBWzFbivyXs9jrcW2P7Z1mHsZJMTeRwSo9WHUNmRyE5WvHfeSxmkFFlv0zkoVzbjoTjKUT6boKIFpBqPqmWg601mNsjDgujGDG1qq5yelCyVhdLflIO59hn14KoabPcAxy_BYZt_esU1pwZzKOQsSydzZZi6bxcBkiAo-qbKTa_GemBJUwtXLIcFDJwXH_6H0GWhAlxITSqkQIGvQljTSrSND7Uy4vENv_mIcy0-rwz9gorBvpa0b0ZJVAQR5BvrsDqNOC0E4OwleLwapEZO3xO_3E9oRjHfvMie8wlhFFWtsI3FI4yETwWeDGS3W33V7-HYrxrE_p-vx6XfhGMh7Z5LrcXQR58H0E3sGNcoL2fJU6FdK8ett9vVzMfgdKP_sVeT2Vi283364wGKf_t6G9YFA0X1S-PorbzmGqc",this.url="/",this.headers=new g.HttpHeaders,this.articlesRentInformation=[],this.settings=new Map,this.categoryNames=new Map,this.history=[],this._actualArticleKey=0,this._actualArticleId=0,this.propertyNames=[],this._selectUser=[{value:0,caption:"Alle"}],i.production||(this.url="http://master.login.plentymarkets.com"+this.url,localStorage.setItem("accessToken",this.token))}return t.prototype.getRestCallData=function(t){return this.http.get(this.url+t,{headers:this.headers})},t.prototype.postRestCallData=function(t,e){return this.http.post(this.url+t,e,{headers:this.headers})},t.prototype.deleteRestCallData=function(t){return this.http.delete(this.url+t,{headers:this.headers})},t.prototype.putRestCallData=function(t,e){return this.http.put(this.url+t,e,{headers:this.headers})},t=s.c([Object(n.Injectable)(),s.f("design:paramtypes",[g.HttpClient])],t)}();function D(t){return null==t}var S,j=function(){function t(t,e,a,n,r,i){this._statsDataService=t,this._historyService=e,this._alert=a,this.route=n,this.router=r,this.routerViewComponent=i,this.isLoading=!1,this.settings=new Map,this.propertyNames=[],this.findUserResult=[],this.autofillLoading=!1,this.searchName="",this.firstName="",this.lastName="",this.email="",this.date="",this.comment="",this.giveBackComment="",this.availableFilter="",this.categoryFilter="",this.userFilter="",this.statusOption="",this._actualArticleTimeDif=0,this._selectAvailable=[{value:-1,caption:"Alle"},{value:0,caption:"Ausgeliehen"},{value:1,caption:"Verf\xfcgbar"}],this._selectCategory=[{value:0,caption:"Alle"}],this._selectUser=[{value:0,caption:"Alle"}],this._selectStatus=[{value:0,caption:"(Optional)"},{value:1,caption:"Defekt"},{value:2,caption:"Entwendet"},{value:3,caption:"Verloren"}],this.leftColumnWidth=0,this.centerColumnWidth=0,this.rightColumnWidth=0,this._name="",this.headerList=this.createHeaderList()}return t.prototype.ngOnDestroy=function(){this._routerSub.unsubscribe()},t.prototype.ngOnInit=function(){var t=this;this.loadPage(1),this._routerSub=this.router.events.subscribe(function(e){if(e instanceof h.NavigationStart)if(console.log(e.url),-1!=e.url.indexOf("/overview/")){var a=e.url.split("/"),n=parseInt(a[a.length-1]);t.loadArticleRoute(n)}else t.loadPage(1)}),!D(this.route.snapshot.paramMap.get("deviceId"))&&this.route.snapshot.paramMap.get("deviceId").length>0&&this.loadArticleRoute(parseInt(this.route.snapshot.paramMap.get("deviceId"))),console.log(this._statsDataService.categoryNames),0===this._statsDataService.categoryNames.size&&(console.log("lade kategorien"),this.loadCategorys(),this.loadPropertyNames())},t.prototype.loadArticleRoute=function(t){console.log("loadArticleRoute"),this._statsDataService._actualArticleId=t,this.setActualArticleKeyById(t),this.loadPage(2),this.loadRentInformation(t,!0),this.isLoading=!0,this.searchName="",this.firstName="",this.lastName="",this.email="",this.comment="",this.giveBackComment="",this.statusOption="",this.updateBreadcrumbByDeviceId(t)},t.prototype.loadCategorys=function(){var t=this;this.isLoading=!0,this._statsDataService.getRestCallData("rest/categories").subscribe(function(e){if(!D(e.entries)){for(var a=0,n=e.entries;a<n.length;a++){var r=n[a];t._statsDataService.categoryNames.set(r.id,r.details[0].name)}t.loadSettings()}},function(e){t.isLoading=!1,t._alert.error("Fehler beim Laden der Kategorien")})},t.prototype.loadPropertyNames=function(){var t=this;this._statsDataService.getRestCallData("rest/properties").subscribe(function(e){if(Object.keys(e).length>0)for(var a=0,n=e.entries;a<n.length;a++){for(var r=n[a],i="NONAME",s=0,o=r.names;s<o.length;s++){var l=o[s];if("de"===l.lang){i=l.name;break}}t._statsDataService.propertyNames[r.position]=i}},function(e){t._alert.error("Fehler beim Laden der Eigenschaften")})},t.prototype.isJsonString=function(t){try{var e=JSON.parse(t);return"object"==typeof e&&e.length>0}catch(a){return!1}},t.prototype.loadSettings=function(){var t=this;this._statsDataService.getRestCallData("plugin/equipmentRental/rentalDevice/settings").subscribe(function(e){for(var a=0,n=e;a<n.length;a++){var r=n[a];D(r)||D(r.name)||t._statsDataService.settings.set(r.name,r.value)}if(t.isJsonString(t._statsDataService.settings.get("categorys"))){for(var i=0,s=JSON.parse(t._statsDataService.settings.get("categorys"));i<s.length;i++){var o=s[i];t._selectCategory.push({value:o,caption:t._statsDataService.categoryNames.get(o)})}t.createArticleData()}else t._alert.error("Es wurde keine Kategorie in den Einstellungen festgelegt"),t.isLoading=!1},function(e){t._alert.error("Fehler beim Laden der Einstellungen")})},t.prototype.createHeaderList=function(){return[{caption:"Verliehen an",sortBy:"user",width:10},{caption:"R\xfcckgabe an",sortBy:"adminUser",width:10,textAlign:m.TerraTextAlignEnum.LEFT},{caption:"Kommentar",sortBy:"comment",width:10,textAlign:m.TerraTextAlignEnum.LEFT},{caption:"Kommentar bei R\xfcckgabe",sortBy:"getBackComment",width:10,textAlign:m.TerraTextAlignEnum.LEFT},{caption:"Verliehen am",sortBy:"created_at",width:10,textAlign:m.TerraTextAlignEnum.CENTER},{caption:"Verliehen bis",sortBy:"rent_until",width:10,textAlign:m.TerraTextAlignEnum.CENTER},{caption:"Status",sortBy:"status",width:10,textAlign:m.TerraTextAlignEnum.CENTER}]},t.prototype.statusToText=function(t){for(var e=0,a=this._selectStatus;e<a.length;e++){var n=a[e];if(t>0&&n.value==t)return n.caption.toString()}return""},t.prototype.emailAutocomplete=function(t){-1===this.email.indexOf("@plentymarkets.com")||0!==this.firstName.length&&0!==this.lastName.length||(this.email=""),0!==this.firstName.length&&0!==this.lastName.length&&(this.email=this.firstName+"."+this.lastName+"@plentymarkets.com")},t.prototype.autofill=function(){var t=this;this.autofillLoading=!1,this.findUserResult=[],D(this.autofillCall)||this.autofillCall.unsubscribe(),this.searchName.length<3||(this.autofillLoading=!0,this.autofillCall=this._statsDataService.getRestCallData("plugin/equipmentRental/rentalDevice/findUser/"+this.searchName).subscribe(function(e){for(var a=0,n=e;a<n.length;a++){var r=n[a];t.findUserResult.push(r)}t.autofillLoading=!1},function(e){t._alert.error("Fehler beim Laden der Benutzer"),t.autofillLoading=!1}))},t.prototype.fillForms=function(t){this.findUserResult=[],this.firstName=t.firstname,this.lastName=t.lastname,this.email=t.email},t.prototype.loadPage=function(t){this.isLoading=!1,this.leftColumnWidth=1===t?2:0,this.centerColumnWidth=1===t?10:0,this.rightColumnWidth=1===t?0:12,this._statsDataService._actualArticleIsRent=!1,1===t&&(this._statsDataService._actualArticleId=0,this._statsDataService._actualArticleKey=0)},t.prototype.onSearchBtnClicked=function(){this.updateData()},t.prototype.onResetBtnClicked=function(){this._name="",this.availableFilter="-1",this.categoryFilter="0",this.updateData()},t.prototype.getDiferenceInDays=function(t){var e=(1e3*t-(new Date).getTime())/864e5;return Math.ceil(e)},t.prototype.onClickTerraCard=function(t){this.router.navigateByUrl("plugin/overview/"+t)},t.prototype.loadCreateItem=function(){this.router.navigateByUrl("plugin/create-item")},t.prototype.actualTime=function(){return(new Date).getTime()/1e3},t.prototype.setActualArticleData=function(t){var e;for(var a in this._statsDataService._actualArticleData={},this._actualArticleTimeDif=0,this._statsDataService.articlesRentInformation)if(this._statsDataService.articlesRentInformation[a].deviceId==t){e=a;break}D(e)||(this._statsDataService._actualArticleData=this._statsDataService.articlesRentInformation[e],this._actualArticleTimeDif=this._statsDataService._actualArticleData.rent_until>0?this.getDiferenceInDays(this._statsDataService._actualArticleData.rent_until):0)},t.prototype.loadRentInformation=function(t,e){var a,n=this;for(var r in void 0===e&&(e=!1),console.log("load rent information"),this.showHistory(t),this._statsDataService.articlesRentInformation)if(this._statsDataService.articlesRentInformation[r].deviceId===t){a=r;break}if(D(a))try{this.isLoading=!0,this._statsDataService.getRestCallData("plugin/equipmentRental/rentalDevice/"+t).subscribe(function(e){Object.keys(e).length>0?(e.isAvailable=parseInt(e.isAvailable),n._statsDataService.articlesRentInformation.push({id:e.id,deviceId:e.deviceId,userId:e.userId,comment:e.comment,rent_until:e.rent_until,created_at:e.created_at,user:e.user,available:e.isAvailable}),n._statsDataService._actualArticleIsRent=0===e.isAvailable):n._statsDataService._actualArticleIsRent=!1,n.setActualArticleData(t),n.isLoading=!1},function(t){n._statsDataService._actualArticleIsRent=!1,n.isLoading=!1})}catch(i){this._statsDataService._actualArticleIsRent=!1,this.isLoading=!1}else this._statsDataService._actualArticleIsRent=0===this._statsDataService.articlesRentInformation[a].available;this.setActualArticleData(t)},t.prototype.updateBreadcrumbByDeviceId=function(t){var e=this,a="NONAME";for(var n in this._statsDataService.articlesResult)if(this._statsDataService.articlesResult[n].id===t){a=this._statsDataService.articlesResult[n].name;break}setTimeout(function(){e.routerViewComponent.breadcrumbsService.updateBreadcrumbNameByUrl("/overview/"+t,a)},100)},t.prototype.setActualArticleKeyById=function(t){for(var e in this._statsDataService.articlesResult)if(this._statsDataService.articlesResult[e].id===t){this._statsDataService._actualArticleKey=e;break}},t.prototype.onSubmit=function(){this.onSearchBtnClicked()},t.prototype.isValidEmail=function(t){return t.indexOf("@")>0&&t.split("@")[1].indexOf(".")>0},t.prototype.giveBack=function(t){var e=this,a={comment:this.giveBackComment,status:parseInt(this.statusOption)};this._statsDataService.putRestCallData("plugin/equipmentRental/rentalDevice/"+t,a).subscribe(function(a){for(var n in e._alert.success("Das Ger\xe4t wurde erfolgreich zur\xfcckgegeben"),e._statsDataService._actualArticleIsRent=!1,e._statsDataService.articlesRentInformation)if(e._statsDataService.articlesRentInformation[n].deviceId==t){delete e._statsDataService.articlesRentInformation[n];break}e.refreshHistory(t),e._statsDataService.articlesResult[e._statsDataService._actualArticleKey].available=1,e._statsDataService.articlesResult[e._statsDataService._actualArticleKey].user="",e.email="",e.date="",e.lastName="",e.firstName="",e.comment="",e.searchName=""},function(t){e._alert.error("Fehler beim Zur\xfcckgeben des Ger\xe4tes")})},t.prototype.rentItem=function(t){var e=this;if(this.firstName.length<3||this.lastName.length<3||!this.isValidEmail(this.email))this._alert.error("Es m\xfcssen alle Felder ausgef\xfcllt werden");else{var a={firstname:this.firstName,lastname:this.lastName,email:this.email,deviceId:this._statsDataService.articlesResult[t].id,userId:2,rent_until:null!=this.date?new Date(this.date).getTime()/1e3:0,comment:this.comment};a.rent_until>0&&a.rent_until<this.actualTime()?this._alert.error("Das R\xfcckgabedatum liegt in der Vergangenheit"):this._statsDataService.postRestCallData("plugin/equipmentRental/rentalDevice",a).subscribe(function(n){for(var r in e._alert.success("Das Ger\xe4t wurde erfolgreich verliehen"),e._statsDataService.articlesRentInformation)if(e._statsDataService.articlesRentInformation[r].deviceId==a.deviceId){delete e._statsDataService.articlesRentInformation[r];break}e._statsDataService.articlesResult[t].available=0,e._statsDataService.articlesResult[t].user=e.capitalize(e.firstName)+" "+e.capitalize(e.lastName),e.loadRentInformation(a.deviceId),e.refreshHistory(t),e._statsDataService._actualArticleIsRent=!0},function(t){e._alert.error("Fehler beim Ausleihen des Ger\xe4tes")})}},t.prototype.updateData=function(){var t=this;this._statsDataService.articles=this._statsDataService.articlesResult,this._name.length>0&&(this._statsDataService.articles=this._statsDataService.articlesResult.filter(function(e){return e.name.toLowerCase().indexOf(t._name.toLowerCase())>-1})),"-1"!=this.availableFilter&&(this._statsDataService.articles=this._statsDataService.articles.filter(function(e){return e.available==parseInt(t.availableFilter)})),"0"!=this.categoryFilter&&(this._statsDataService.articles=this._statsDataService.articles.filter(function(e){return e.category==parseInt(t.categoryFilter)})),"0"!=this.userFilter&&(this._statsDataService.articles=this._statsDataService.articles.filter(function(e){return e.user==t.userFilter}))},t.prototype.createArticleData=function(){var t=this,e=JSON.parse(this._statsDataService.settings.get("categorys"));this._statsDataService.articlesResult=[];for(var a=function(e){n.isLoading=!0,n._statsDataService.getRestCallData("plugin/equipmentRental/rentalDevice?categoryId="+e).subscribe(function(a){for(var n=0,r=a;n<r.length;n++){var i=r[n];if(t._statsDataService.articlesResult.push({id:i.id,name:null!==i.name?i.name:"NONAME",image:i.image,category:e,attributes:i.variationAttributeValues,properties:i.properties,available:i.isAvailable,user:i.user,rent_until:i.rent_until}),0==i.isAvailable){for(var s=!1,o=0,l=t._statsDataService._selectUser;o<l.length;o++){if(l[o].caption==i.user){s=!0;break}}s||t._statsDataService._selectUser.push({value:i.user,caption:i.user})}}t.isLoading=!1},function(e){t._alert.error("Fehler beim Laden der Artikel"),t.isLoading=!1})},n=this,r=0,i=e;r<i.length;r++){a(i[r])}this._statsDataService.articles=this._statsDataService.articlesResult},t.prototype.exportCSV=function(){for(var t={year:"numeric",month:"2-digit",day:"2-digit"},e="EquipmentRental-"+(new Date).toLocaleDateString("de-DE",t).split(".").join("-")+".csv",a=[],n=0,r=this._statsDataService.articles;n<r.length;n++){var i=r[n],s="";if(i.properties.length>0)for(var o=0,l=i.properties;o<l.length;o++){var c=l[o];!D(c.relationValues[0].value)&&c.relationValues[0].value.length>0&&(s+=this._statsDataService.propertyNames[c.propertyRelation.position]+": ",s+=c.relationValues[0].value+"<br>")}var u="";0==i.available&&(u=0==i.rent_until?"Unbestimmte Zeit":new Date(1e3*i.rent_until).toLocaleDateString("de-DE",t));var d={id:i.id,name:i.name,category:this._statsDataService.categoryNames.get(i.category),user:i.user,image:i.image,available:1===i.available?"Verf\xfcgbar":"Ausgeliehen",rent_until:u,properties:s};console.log(JSON.stringify(d)),a.push(d)}var p=function(t,e){return null===e?"":e},g=Object.keys(a[0]),h=a.map(function(t){return g.map(function(e){return JSON.stringify(t[e],p).split("<br>").join("\n")}).join(",")});h.unshift(g.join(","));var m=h.join("\r\n"),v=new Blob([m],{type:"text/csv"}),f=window.URL.createObjectURL(v);if(navigator.msSaveOrOpenBlob)navigator.msSaveBlob(v,e);else{var b=document.createElement("a");b.href=f,b.download=e,document.body.appendChild(b),b.click(),document.body.removeChild(b)}window.URL.revokeObjectURL(f)},t.prototype.refreshHistory=function(t){D(this._statsDataService.history[t])||(this._statsDataService.history[t]=void 0),this._historyService.clearEntrys(),this.showHistory(t)},t.prototype.showHistory=function(t){var e=this;this.isLoading=!0;var a={year:"numeric",month:"2-digit",day:"2-digit"};D(this._statsDataService.history[t])||(this._statsDataService.history[t]=void 0),this._historyService.clearEntrys(),this._statsDataService.getRestCallData("plugin/equipmentRental/rentalDevice/history/"+t).subscribe(function(n){e._statsDataService.history[t]=[];for(var r=0,i=n;r<i.length;r++){var s=i[r],o={user:s.user,adminUser:0===s.adminUser.id?"NONAME":e.capitalize(s.adminUser.firstname)+" "+e.capitalize(s.adminUser.lastname),comment:s.comment,getBackComment:s.getBackComment,isAvailable:s.isAvailable,rent_until:s.rent_until>0?new Date(1e3*s.rent_until).toLocaleDateString("de-DE",a):"Unbestimmte Zeit",created_at:new Date(1e3*s.created_at).toLocaleDateString("de-DE",a),status:e.statusToText(s.status)};e._statsDataService.history[t].push(o),e._historyService.addEntry(o),e.isLoading=!0}e._historyService.getResults(),e.isLoading=!1},function(t){e._alert.error("Fehler beim Laden der Historie")})},t.prototype.capitalize=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},t=s.c([Object(n.Component)({selector:"overview-view",template:a("T8DE"),providers:[y],styles:[a("e5xU")]}),s.f("design:paramtypes",[_,y,m.AlertService,h.ActivatedRoute,h.Router,v])],t)}();function w(t){return null==t}!function(t){t.descending="desc",t.ascending="asc"}(S||(S={}));var x=function(t){function e(){var e=t.call(this)||this;return e.data=[],e.defaultPagingSize=25,e.pagingSizes=[{value:25,caption:"25"},{value:50,caption:"50"},{value:75,caption:"75"},{value:100,caption:"100"}],e}return s.d(e,t),e.prototype.requestTableData=function(t){var e=Math.max((t.page-1)*t.itemsPerPage,0),a=Math.min(t.page*t.itemsPerPage,this.data.length),n=Math.ceil(this.data.length/t.itemsPerPage),r={page:t.page,itemsPerPage:t.itemsPerPage,totalsCount:this.data.length,isLastPage:t.page===n,lastPageNumber:n,firstOnPage:e+1,lastOnPage:a};w(t)&&(t={}),w(t.sortBy)&&(t.sortBy="created_at"),w(t.sortOrder)&&(t.sortOrder=S.descending);var i=this.applySorting(this.data,t.sortBy,t.sortOrder);return r.entries=i.slice(e,a),Object(f.a)(r)},e.prototype.applySorting=function(t,e,a){var n;return n=a===S.ascending?function(t,a){return t[e]-a[e]}:function(t,a){return a[e]-t[e]},t.sort(n)},e.prototype.addEntry=function(t){this.data.push(t)},e.prototype.clearEntrys=function(){this.data=[]},e.prototype.removeEntryByDeviceId=function(t){for(var e=[],a=0,n=this.data;a<n.length;a++){var r=n[a];r.deviceId!==t&&e.push(r)}this.data=e},e.prototype.dataToRowMapping=function(t){return{cellList:[{data:t.name},{data:t.user},{data:t.comment},{data:t.rent_until},{data:t.created_at},{data:t.deviceId}],data:t}},e=s.c([Object(n.Injectable)(),s.f("design:paramtypes",[])],e)}(m.TerraDataTableBaseService),k=function(){function t(t,e,a){this._statsDataService=t,this._manageService=e,this._alert=a,this.headerList=this.createHeaderList()}return t.prototype.ngOnInit=function(){this.loadHistoryData()},t.prototype.createHeaderList=function(){return[{caption:"Name",sortBy:"name",width:10,textAlign:m.TerraTextAlignEnum.LEFT},{caption:"Verliehen an",sortBy:"user",width:10,textAlign:m.TerraTextAlignEnum.LEFT},{caption:"Kommentar",sortBy:"comment",width:10,textAlign:m.TerraTextAlignEnum.LEFT},{caption:"Verliehen am",sortBy:"created_at",width:10,textAlign:m.TerraTextAlignEnum.LEFT},{caption:"Tage verbleibend",sortBy:"rent_until",width:10,textAlign:m.TerraTextAlignEnum.LEFT}]},t.prototype.loadHistoryData=function(){var t=this;this.isLoading=!0;var e={year:"numeric",month:"2-digit",day:"2-digit"};this._manageService.clearEntrys(),this._statsDataService.getRestCallData("plugin/equipmentRental/rentalDevice/getRentedDevices").subscribe(function(a){for(var n=0,r=a;n<r.length;n++){var i=r[n],s=1e3*i.rent_until-(new Date).getTime(),o=Math.ceil(s/864e5),l={name:i.name,user:i.user,adminUser:i.adminUser,comment:i.comment,getBackComment:i.getBackComment,isAvailable:i.isAvailable,rent_until:i.rent_until>0?o:"Unbestimmte Zeit",created_at:new Date(1e3*i.created_at).toLocaleDateString("de-DE",e),status:i.status,deviceId:i.deviceId};t._manageService.addEntry(l),t.isLoading=!0}t._manageService.getResults(),t.isLoading=!1},function(t){console.log("error while loading history data")})},t.prototype.executeGroupFunction=function(t){this.manageOverlay.showOverlay()},t.prototype.executePopupFunction=function(t){var e=this;if(this.sendMailOption||this.giveBackOption){this.manageOverlay.hideOverlay();for(var a=function(t){var a={userId:t.data.user.id,deviceId:t.data.deviceId};if(n.sendMailOption&&n._statsDataService.putRestCallData("plugin/equipmentRental/rentalDevice/remindEmail",a).subscribe(function(t){e._alert.success("Die Aktion wurde erfolgreich ausgef\xfchrt")},function(a){e._alert.error("Fehler beim Senden der E-Mail an "+t.data.user.email)}),n.giveBackOption){n._statsDataService.putRestCallData("plugin/equipmentRental/rentalDevice/"+t.data.deviceId,{comment:"",status:""}).subscribe(function(a){e._alert.success("Das Ger\xe4t wurde erfolgreich zur\xfcckgegeben"),e._manageService.removeEntryByDeviceId(t.data.deviceId),e._manageService.getResults()},function(t){e._alert.error("Fehler beim Zur\xfcckgeben des Ger\xe4tes")})}},n=this,r=0,i=t;r<i.length;r++){a(i[r])}this.giveBackOption=!1,this.sendMailOption=!1}else this._alert.error("Es wurde keine Aktion ausgew\xe4hlt")},t.prototype.expiredDateClass=function(t){if(this.isNumber(t)){if(t<0)return"red";if(0==t)return"yellow"}return""},t.prototype.isNumber=function(t){return"number"==typeof t},t.prototype.formatSingularPlural=function(t,e,a){return 1===t||-1===t?e:a},t.prototype.capitalize=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},s.c([Object(n.ViewChild)("manageOverlay"),s.f("design:type",m.TerraOverlayComponent)],t.prototype,"manageOverlay",void 0),s.c([Object(n.ViewChild)("sendMailOption"),s.f("design:type",Object)],t.prototype,"sendMailOption",void 0),s.c([Object(n.ViewChild)("giveBackOption"),s.f("design:type",Object)],t.prototype,"giveBackOption",void 0),t=s.c([Object(n.Component)({selector:"manage-view",template:a("VhEL"),providers:[x]}),s.f("design:paramtypes",[_,x,m.AlertService])],t)}();function I(t){return null==t}var R=function(){function t(t,e){this._statsDataService=t,this._alert=e,this.isLoading=!1,this.emailTemplate="E-Mail Template",this.categoryValues=[],this.activeCategorys=[],this.settings=new Map,this.oldSettings=new Map,this.saveSettingSuccess=0,this.saveSettingError=0}return t.prototype.ngOnInit=function(){this.getSettings()},t.prototype.getSettings=function(){var t=this;this.isLoading=!0,this._statsDataService.getRestCallData("plugin/equipmentRental/rentalDevice/settings").subscribe(function(e){for(var a=0,n=e;a<n.length;a++){var r=n[a];I(r)||I(r.name)||t.settings.set(r.name,r.value)}t.emailTemplate=t.settings.get("emailTemplate"),t.emailTemplateTopic=t.settings.get("emailTemplateTopic"),t.settings.forEach(function(e,a){t.oldSettings.set(a,e)}),t.getCategorys()},function(e){console.log("error while loading settings"),t.isLoading=!1})},t.prototype.isJsonString=function(t){try{var e=JSON.parse(t);return"object"==typeof e&&e.length>0}catch(a){return!1}},t.prototype.getCategorys=function(){var t=this;this._statsDataService.getRestCallData("rest/categories").subscribe(function(e){if(!I(e.entries)){for(var a=t.isJsonString(t.settings.get("categorys"))?JSON.parse(t.settings.get("categorys")):[],n=0,r=e.entries;n<r.length;n++){var i=r[n],s={value:i.id,caption:i.details[0].name,selected:a.includes(i.id)};t.categoryValues.push(s),a.includes(i.id)&&t.activeCategorys.push({name:i.details[0].name})}t.emailTemplate=t.settings.get("emailTemplate"),t.emailTemplateTopic=t.settings.get("emailTemplateTopic"),t.settings.forEach(function(e,a){t.oldSettings.set(a,e)}),t.isLoading=!1}},function(e){console.log("error while loading categorys"),t.isLoading=!1})},t.prototype.getCategoryNameByid=function(t){for(var e=0,a=this.categoryValues;e<a.length;e++){var n=a[e];if(n.value==t)return n.caption}return""},t.prototype.saveSettings=function(){var t=this,e=[];this.activeCategorys=[];for(var a=0,n=this.categoryValues;a<n.length;a++){var r=n[a];r.selected&&(e.push(r.value),this.activeCategorys.push({name:this.getCategoryNameByid(r.value)}))}this.settings.set("categorys",JSON.stringify(e)),this.settings.set("emailTemplate",this.emailTemplate),this.settings.set("emailTemplateTopic",this.emailTemplateTopic),this.saveSettingSuccess=0,this.saveSettingError=0,this.settings.forEach(function(e,a){t.oldSettings.get(a)!=e&&(t.saveSettingsRequest(a,e),t.oldSettings.set(a,e))})},t.prototype.saveSettingsRequest=function(t,e){var a=this,n={name:t,value:e};this._statsDataService.putRestCallData("plugin/equipmentRental/rentalDevice/setting",n).subscribe(function(t){0==a.saveSettingSuccess&&a._alert.success("Einstellungen wurden gespeichert"),a.saveSettingSuccess++},function(t){a.saveSettingError++,1==a.saveSettingError&&a._alert.error("Fehler beim Speichern der Einstellungen")})},t=s.c([Object(n.Component)({selector:"settings-view",template:a("+S+1")}),s.f("design:paramtypes",[_,m.AlertService])],t)}(),T=function(){function t(){}return t.prototype.ngOnInit=function(){},t=s.c([Object(n.Component)({selector:"ptb-create-item",template:a("jx0p"),styles:[a("aIeQ")]}),s.f("design:paramtypes",[])],t)}(),A=[{path:"",redirectTo:"plugin",pathMatch:"full"},{path:"plugin",component:v,children:[{path:"",redirectTo:"overview",pathMatch:"full"},{path:"settings",component:R,data:{label:"Einstellungen"}},{path:"overview",component:j,data:{label:"Ger\xe4te\xfcbersicht"}},{path:"overview/:deviceId",component:j,data:{label:"Verleihen"}},{path:"manage",component:k,data:{label:"Verleih\xfcbersicht"}},{path:"create-item",component:T,data:{label:"Artikel anlegen"}}]}],C=[],O=h.RouterModule.forRoot(A,{useHash:!0}),N=a("wFw1"),L=function(t){function e(e,a,n){var r=t.call(this,new g.HttpClient(e),a,n)||this;return r.httpBackend=e,r}return s.d(e,t),e=s.c([Object(n.Injectable)(),s.g(1,Object(n.Inject)(c.L10N_CONFIG)),s.f("design:paramtypes",[g.HttpBackend,Object,c.Caching])],e)}(c.L10nTranslationProvider),E=function(){function t(){}return t=s.c([Object(n.Injectable)()],t)}(),M=function(){function t(){}return t=s.c([Object(n.Component)({selector:"plugin-equipment-rental",template:a("xBDF"),styles:[a("ZnS7")]})],t)}(),B=a("Jc0W"),z=function(){function t(t){this.l10nLoader=t,this.l10nLoader.load()}return t=s.c([Object(n.NgModule)({imports:[o.a,N.a,l.HttpModule,u.FormsModule,g.HttpClientModule,c.TranslationModule.forRoot(d,{translationProvider:L}),h.RouterModule.forRoot([]),m.TerraComponentsModule,B.TooltipModule.forRoot(),O],declarations:[M,v,j,k,R,T],providers:[{provide:n.APP_INITIALIZER,useFactory:P,deps:[c.L10nLoader],multi:!0},m.httpInterceptorProviders,C,m.TerraNodeTreeConfig,E,_],bootstrap:[M]}),s.f("design:paramtypes",[c.L10nLoader])],t)}();function P(t){return function(){return t.load()}}i.production&&Object(n.enableProdMode)(),Object(r.a)().bootstrapModule(z).catch(function(t){return console.error(t)})}},[[0,0,5]]]);